<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Your Cart</title>
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
     <link rel="icon" type="image/x-icon" href="logotus.png">
     <style>
          html,
          body {
               font-family: 'Poppins', sans-serif;
               background-color: #F7A8C4;
               height: 100%;
               margin: 0;
               padding: 0;
          }

          .navbar {
               background-color: #FFEDFA;
               padding: 15px;
               display: flex;
               justify-content: space-between;
               align-items: center;
          }

          .wrapper {
               min-height: 100vh;
               display: flex;
               flex-direction: column;
          }

          .nav-button {
               background-color: #F7A8C4;
               padding: 8px 15px;
               border-radius: 8px;
               text-decoration: none;
               font-weight: bold;
               color: white;
               font-size: 16px;
               transition: background-color 0.3s;
          }

          .nav-button:hover {
               background-color: #b8748b;
          }

          .cart-container {
               padding: 20px;
               max-width: 800px;
               margin: 0 auto;
               flex: 1;
          }

          h1 {
               text-align: center;
               color: #333;
               margin-bottom: 20px;
          }

          .cart-item {
               display: flex;
               align-items: center;
               justify-content: space-between;
               background-color: #FFEDFA;
               margin-bottom: 15px;
               padding: 10px;
               border-radius: 8px;
               box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
          }

          .cart-item img {
               width: 80px;
               height: 80px;
               object-fit: cover;
               border-radius: 8px;
               margin-right: 15px;
          }

          .item-info {
               flex-grow: 1;
               margin-right: 10px;
          }

          .item-info h3 {
               margin: 0 0 5px;
               font-size: 18px;
          }

          .item-info p {
               margin: 0;
               font-size: 14px;
               color: #555;
          }

          .item-price {
               font-weight: bold;
               font-size: 16px;
               margin-right: 10px;
               min-width: 80px;
               text-align: right;
          }

          .quantity-controls {
               display: flex;
               align-items: center;
               margin: 0 10px;
          }

          .quantity-btn {
               width: 28px;
               height: 28px;
               background-color: #f0d7e5;
               border: none;
               border-radius: 4px;
               font-size: 16px;
               cursor: pointer;
               display: flex;
               justify-content: center;
               align-items: center;
          }

          .quantity-btn:hover {
               background-color: #e5c4d6;
          }

          .quantity-input {
               width: 40px;
               height: 28px;
               text-align: center;
               border: 1px solid #e5c4d6;
               border-radius: 4px;
               margin: 0 5px;
          }

          .remove-btn {
               background-color: #ff6b6b;
               color: white;
               border: none;
               padding: 8px 12px;
               border-radius: 6px;
               cursor: pointer;
               transition: background-color 0.3s;
               white-space: nowrap;
          }

          .remove-btn:hover {
               background-color: #e55a5a;
          }

          .total {
               text-align: right;
               font-size: 20px;
               font-weight: bold;
               margin-top: 20px;
          }

          .empty {
               text-align: center;
               font-size: 18px;
               color: #666;
               margin-top: 50px;
          }

          .update-btn {
               background-color: #d48c9c;
               color: white;
               border: none;
               padding: 10px 20px;
               border-radius: 8px;
               cursor: pointer;
               font-size: 16px;
               margin-top: 15px;
               float: right;
               transition: background-color 0.3s;
          }

          .update-btn:hover {
               background-color: #b8748b;
          }

          .store-notice {
               background-color: #f8f0f4;
               border-radius: 8px;
               padding: 15px;
               margin: 20px 0;
               text-align: center;
               color: #333;
               font-size: 14px;
          }


          .footer-container {
               background-color: #F7A8C4;
               padding: 0;
               width: 100%;
          }

          .main-footer {
               background-color: #FFEDFA;
          }

          .social-section {
               text-align: center;
               padding: 20px 0;
          }

          .social-title {
               color: #4a332f;
               font-weight: bold;
               font-size: 1.2rem;
               margin-bottom: 15px;
          }

          .social-icons {
               display: flex;
               justify-content: center;
               gap: 15px;
          }

          .social-icon {
               color: white;
               width: 40px;
               height: 40px;
               border-radius: 50%;
               display: flex;
               align-items: center;
               justify-content: center;
               font-size: 1.3rem;
               text-decoration: none;
               transition: all 0.3s ease;
          }

          .social-icon:hover {
               transform: translateY(-5px);
               background-color: whitesmoke;
               color: #F7A8C4;
          }

          .main-footer {
               display: flex;
               justify-content: space-between;
               align-items: center;
               padding: 20px 10%;
               border-top: 1px solid #d0d6e0;
          }

          .company-info {
               text-align: left;
               color: #555;
          }

          .company-name {
               font-weight: bold;
               color: #4a332f;
               font-size: 1.1rem;
               margin-bottom: 5px;
          }

          .company-details {
               color: #555;
               font-size: 0.9rem;
               margin: 3px 0;
          }

          .company-copyright {
               color: #555;
               font-size: 0.9rem;
          }

          .footer-logo {
               width: 35px;
               height: auto;
          }

          .footer-links {
               text-align: right;
          }

          .footer-link {
               display: block;
               color: #555;
               text-decoration: none;
               margin: 10px 0;
               font-size: 0.9rem;
               transition: all 0.3s ease;
          }

          .footer-link:hover {
               color: #4a332f;
               transform: translateX(-5px);
          }


          @media (max-width: 768px) {
               .cart-item {
                    flex-wrap: wrap;
               }

               .quantity-controls {
                    margin: 10px 0;
               }

               .main-footer {
                    flex-direction: column;
                    text-align: center;
               }

               .company-info {
                    text-align: center;
                    margin-bottom: 20px;
               }

               .footer-links {
                    text-align: center;
                    margin-top: 20px;
               }
          }

          .refund-notice {
               background: #FFEDFA;
               padding: 15px;
               border-left: 4px solid #FFEDFA;
               margin: 15px 0;
               border-radius: 4px;
          }

          .refund-notice a {
               color: #FFEDFA;
               text-decoration: underline;
               font-weight: bold;
          }

          .update-btn {
               background-color: #FFEDFA;
               color: rgb(0, 0, 0);
               border: none;
               padding: 12px 20px;
               font-size: 1.1em;
               border-radius: 4px;
               cursor: pointer;
               width: 100%;
               margin-top: 20px;
               transition: background-color 0.3s;
          }

          .update-btn:hover {
               background-color: #b8748b;
               color: white;
          }

          /* Popup styles */
          .modal-overlay {
               position: fixed;
               top: 0;
               left: 0;
               right: 0;
               bottom: 0;
               background-color: rgba(0, 0, 0, 0.5);
               display: none;
               justify-content: center;
               align-items: center;
               z-index: 1000;
          }

          .modal-container {
               background-color: #F7A8C4;
               border-radius: 10px;
               width: 90%;
               max-width: 500px;
               padding: 25px;
               box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
               position: relative;
               animation: modalAppear 0.3s ease-out;
          }

          @keyframes modalAppear {
               from {
                    opacity: 0;
                    transform: translateY(-50px);
               }

               to {
                    opacity: 1;
                    transform: translateY(0);
               }
          }

          .modal-header {
               text-align: center;
               margin-bottom: 20px;
               padding-bottom: 15px;
               border-bottom: 1px solid #f0d7e5;
          }

          .modal-title {
               color: #4a332f;
               font-size: 1.5rem;
               margin: 0;
          }

          .pickup-options {
               display: flex;
               flex-direction: column;
               gap: 15px;
          }

          .pickup-option {
               background-color: white;
               border: 2px solid #f0d7e5;
               border-radius: 8px;
               padding: 15px;
               cursor: pointer;
               transition: all 0.3s ease;
               display: flex;
               align-items: center;
          }

          .pickup-option:hover {
               border-color: #F7A8C4;
               transform: translateY(-2px);
          }

          .pickup-option.selected {
               border-color: #F7A8C4;
               background-color: #fef6fa;
          }

          .option-icon {
               font-size: 1.5rem;
               margin-right: 15px;
               color: #F7A8C4;
          }

          .option-details {
               flex-grow: 1;
          }

          .option-title {
               font-weight: bold;
               color: #4a332f;
               margin-bottom: 5px;
          }

          .option-description {
               font-size: 0.9rem;
               color: #666;
          }

          .modal-actions {
               display: flex;
               justify-content: space-between;
               margin-top: 25px;
          }

          .modal-btn {
               padding: 12px 20px;
               border-radius: 8px;
               font-size: 1rem;
               border: none;
               cursor: pointer;
               transition: background-color 0.3s;
               width: 48%;
          }

          .cancel-btn {
               background-color: #f0d7e5;
               color: #4a332f;
          }

          .cancel-btn:hover {
               background-color: #e5c4d6;
          }

          .confirm-btn {
               background-color: #f0d7e5;
               color: black;
               font-weight: bold;
          }

          .confirm-btn:hover {
               background-color: #b8748b;
          }

          .close-modal {
               position: absolute;
               top: 15px;
               right: 15px;
               background: transparent;
               border: none;
               font-size: 1.2rem;
               color: #666;
               cursor: pointer;
          }

          .close-modal:hover {
               color: #333;
          }

          /* Radio button styling */
          .radio-container {
               display: flex;
               align-items: center;
          }

          .custom-radio {
               width: 20px;
               height: 20px;
               border: 2px solid #F7A8C4;
               border-radius: 50%;
               margin-right: 10px;
               display: flex;
               justify-content: center;
               align-items: center;
          }

          .custom-radio-inner {
               width: 12px;
               height: 12px;
               border-radius: 50%;
               background-color: #F7A8C4;
               opacity: 0;
               transition: opacity 0.2s;
          }

          .pickup-option.selected .custom-radio-inner {
               opacity: 1;
          }
     </style>
</head>

<body>
     <div class="wrapper">
          <nav class="navbar">
               <a href="menu.html" class="nav-button">← Menu</a>
               <a href="homepage.html" class="nav-button">Home</a>
          </nav>

          <div class="cart-container" id="cart-container">
               <h1>Your Cart</h1>
               <p class="empty" id="empty-msg">Your cart is empty.</p>
          </div>
          <div class="footer-container">
               <div class="social-section">
                    <h3 class="social-title">Follow us on</h3>
                    <div class="social-icons">
                         <a href="https://www.instagram.com/lotuscoffee.ph?igsh=ZzB4ZWxzY2M1MjRr" class="social-icon">
                              <i class="fab fa-instagram"></i>
                         </a>
                         <a href="https://www.facebook.com/profile.php?id=61576273525574" class="social-icon">
                              <i class="fab fa-facebook"></i>
                         </a>
                    </div>
               </div>

               <div class="main-footer">
                    <div class="company-info">
                         <div class="company-name">LOTUS COFFEE PHILIPPINES INC.</div>
                         <div class="company-details">Company registration no: 635-381-780-00000</div>
                         <div class="company-info">Recto, Manila</div>
                         <div class="company-info">Email: lotusbrewcafe@gmail.com</div>
                         <div class="company-copyright">COPYRIGHT 2025 © LOTUS COFFEE</div>
                    </div>
                    <div class="footer-links">
                         <a href="#" class="footer-link">Privacy Policy</a>
                         <a href="#" class="footer-link">Terms & Conditions</a>
                         <a href="#" class="footer-link">Customer Support</a>
                         <a href="#" class="footer-link">Refund Policy</a>
                         <a href="#" class="footer-link">FAQS</a>
                    </div>
               </div>
          </div>

          <!-- Modal Pickup/Delivery Popup -->
          <div class="modal-overlay" id="pickupModal">
               <div class="modal-container">
                    <button class="close-modal" id="closeModal">×</button>
                    <div class="modal-header">
                         <h2 class="modal-title">Choose Pickup Option</h2>
                    </div>
                    <div class="pickup-options">
                         <div class="pickup-option" data-option="self-pickup">
                              <div class="radio-container">
                                   <div class="custom-radio">
                                        <div class="custom-radio-inner"></div>
                                   </div>
                              </div>
                              <div class="option-icon">
                                   <i class="fas fa-store"></i>
                              </div>
                              <div class="option-details">
                                   <div class="option-title">Self Pickup</div>
                                   <div class="option-description">Pick up your order at our store. No extra fees.</div>
                              </div>
                         </div>
                         <div class="pickup-option" data-option="delivery">
                              <div class="radio-container">
                                   <div class="custom-radio">
                                        <div class="custom-radio-inner"></div>
                                   </div>
                              </div>
                              <div class="option-icon">
                                   <i class="fas fa-motorcycle"></i>
                              </div>
                              <div class="option-details">
                                   <div class="option-title">Delivery</div>
                                   <div class="option-description">Get your order delivered to your location. Delivery
                                        fees
                                        apply.</div>
                              </div>
                         </div>
                    </div>
                    <div class="modal-actions">
                         <button class="modal-btn cancel-btn" id="cancelBtn">Cancel</button>
                         <button class="modal-btn confirm-btn" id="confirmBtn">Continue</button>
                    </div>
               </div>
          </div>

          <script>
               const container = document.getElementById('cart-container');
               const emptyMsg = document.getElementById('empty-msg');
               let cart = JSON.parse(localStorage.getItem('cart')) || [];

               // Modal elements
               const modal = document.getElementById('pickupModal');
               const closeModalBtn = document.getElementById('closeModal');
               const cancelBtn = document.getElementById('cancelBtn');
               const confirmBtn = document.getElementById('confirmBtn');
               const pickupOptions = document.querySelectorAll('.pickup-option');
               let selectedOption = null;

               function renderCart() {
                    // Remove previous items
                    document.querySelectorAll('.cart-item, .total, .store-notice, .update-btn, .refund-notice').forEach(el => el.remove());

                    if (!cart.length) {
                         emptyMsg.style.display = 'block';
                         return;
                    }
                    emptyMsg.style.display = 'none';

                    let total = 0;
                    cart.forEach((item, index) => {
                         // Ensure quantity is set (default to 1 if not present)
                         if (!item.quantity) {
                              item.quantity = 1;
                         }

                         const priceNum = parseFloat(item.price.replace(/[^0-9.-]+/g, ''));
                         total += priceNum * item.quantity;

                         const div = document.createElement('div');
                         div.className = 'cart-item';
                         div.innerHTML = `
                         <img src="${item.img}" alt="${item.name}">
                         <div class="item-info">
                              <h3>${item.name}</h3>
                              <p>${item.price}</p>
                         </div>
                         <div class="item-price">₱${(priceNum * item.quantity).toFixed(2)}</div>
                         <div class="quantity-controls">
                              <button class="quantity-btn decrease" data-index="${index}">-</button>
                              <input type="text" class="quantity-input" value="${item.quantity}" data-index="${index}">
                              <button class="quantity-btn increase" data-index="${index}">+</button>
                         </div>
                         <button class="remove-btn" data-index="${index}">Remove</button>
                    `;
                         container.appendChild(div);
                    });


                    const notice = document.createElement('div');

                    container.appendChild(notice);
                    const refundNotice = document.createElement('div');
                    refundNotice.className = 'refund-notice';
                    refundNotice.innerHTML = `
                    <div style="background: #FFEDFA; padding-top: 20px; padding: 10px; border-left: 4px solid #FFEDFA; margin: 10px 0;">
                         <p><strong>Pickup Order Policy:</strong> Orders can be cancelled up to 1 hour before pickup time. 
                         <a href="refund-policy.html" style="color: #6F4E37; text-decoration: underline;">View refund policy</a> for details.</p>
                    </div>
               `;
                    container.appendChild(refundNotice);

                    const totalDiv = document.createElement('div');
                    totalDiv.className = 'total';
                    totalDiv.innerText = 'Subtotal: ₱' + total.toFixed(2);
                    container.appendChild(totalDiv);

                    // Add update cart button
                    const updateBtn = document.createElement('button');
                    updateBtn.className = 'update-btn';
                    updateBtn.innerText = 'Proceed to Checkout';
                    updateBtn.onclick = function () {
                         // Show the pickup modal instead of going directly to checkout
                         openPickupModal();
                    };
                    container.appendChild(updateBtn);

                    document.querySelectorAll('.quantity-btn.decrease').forEach(btn => {
                         btn.addEventListener('click', function () {
                              const index = parseInt(this.getAttribute('data-index'));
                              if (cart[index].quantity > 1) {
                                   cart[index].quantity--;
                                   renderCart();
                              }
                         });
                    });

                    document.querySelectorAll('.quantity-btn.increase').forEach(btn => {
                         btn.addEventListener('click', function () {
                              const index = parseInt(this.getAttribute('data-index'));
                              cart[index].quantity++;
                              renderCart();
                         });
                    });

                    document.querySelectorAll('.quantity-input').forEach(input => {
                         input.addEventListener('change', function () {
                              const index = parseInt(this.getAttribute('data-index'));
                              const newQuantity = parseInt(this.value);

                              if (isNaN(newQuantity) || newQuantity < 1) {
                                   this.value = cart[index].quantity;
                                   return;
                              }

                              cart[index].quantity = newQuantity;
                              renderCart();
                         });
                    });
               }

               function removeItem(idx) {
                    cart.splice(idx, 1);
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
               }

               // Set up event delegation for remove buttons
               container.addEventListener('click', function (e) {
                    if (e.target.classList.contains('remove-btn')) {
                         const index = parseInt(e.target.getAttribute('data-index'));
                         removeItem(index);
                    }
               });

               // Modal functions
               function openPickupModal() {
                    modal.style.display = 'flex';
                    document.body.style.overflow = 'hidden'; // Prevent background scrolling
               }

               function closePickupModal() {
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto'; // Restore scrolling
                    // Reset selection
                    pickupOptions.forEach(option => option.classList.remove('selected'));
                    selectedOption = null;
               }

               // Setup modal event listeners
               closeModalBtn.addEventListener('click', closePickupModal);
               cancelBtn.addEventListener('click', closePickupModal);

               // Close modal when clicking outside
               modal.addEventListener('click', function (e) {
                    if (e.target === modal) {
                         closePickupModal();
                    }
               });

               // Setup pickup options
               pickupOptions.forEach(option => {
                    option.addEventListener('click', function () {
                         // Remove selected class from all options
                         pickupOptions.forEach(opt => opt.classList.remove('selected'));
                         // Add selected class to clicked option
                         this.classList.add('selected');
                         // Store selected option
                         selectedOption = this.getAttribute('data-option');
                    });
               });

               // Confirm button action
               confirmBtn.addEventListener('click', function () {
                    if (!selectedOption) {
                         alert('Please select a pickup option');
                         return;
                    }

                    // Save the selected option to localStorage
                    localStorage.setItem('pickupOption', selectedOption);
                    localStorage.setItem('cart', JSON.stringify(cart));

                    // Redirect to checkout page
                    window.location.href = "checkout.html";
               });

               // Initialize the cart
               renderCart();
          </script>
</body>

</html>